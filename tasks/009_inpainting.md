# Inpainting Generation

In contrast to our standard quadrant-based infill generation, we need to be able
to generate "in-between" quadrants for the following scenario

A C x G I

B D x H J

If we want to generate the quadrants in between C and G (x) and in between D and
H (x), then we need to be able to create an image where the left quarter is C D
and the right quarter is G H.

In order to make this generic, what we'll build next is an "arbitrary" infill
fine-tuning dataset to train a model to fill in any rectangle within the tile,
so long as the total area is less than 1/2 of the total area of the image.

We'll want to generate ~120 fine-tuning examples, using the dataset in
synthetic_data/datasets/v04.

We'll create a new directory called `inpainting` with the following
distributions:

- 20% Vertical band - a rectangle all the way from the top to the bottom of the
  tile.
- 20% Horizontal band - a rectangle all the way from the left to the right of
  the tile
- 20% Vertical rectangle - a rectangle that is taller than it is wide, half of
  which touch the edge or edges of the tile.
- 20% Horizontal rectangle - a rectangle that is wider than it is tall,, half of
  which touch the edge or edges of the tile.
- 20% Inner square - a square somewhere in the middle of the tile.

Each synthetic image will be generated by taking the generation image from
`generations/`, then creating one of the above rectangles with the pixels from
the corresponding image in `renders/`. Each rectangle must then be outlined in a
solid red 2px wide outline (this should be painted over the image, no
displacement of pixels). An image will then be saved in the `inpainting/`
directory, with a sequential alphabetical suffix (e.g. 000_a.png, 000_b.png)

Since there are ~40 images in the directories, we'll need to create 3 variants
for each image, and intelligently sample from the above target distribution.

Finally, we need to create a csv in with the following columns:

| `inpainting`                 | `generation`                     | `prompt` |
| ---------------------------- | -------------------------------- | -------- |
| "inpainting/<image_name>.png | "generations/<image_number>.png" | <prompt> |

Where the prompt is the string literal "Fill in the outlined section with the
missing pixels corresponding to the <isometric nyc pixel art> style, removing
the border and exactly following the shape/style/structure of the surrounding
image.

Create a script in
src/isometric_nyc/synthetic_data/create_inpainting_examples.py to do all of
this.
